# VPC-2

## 1. access ec2-i in private subnet
### 1.1. bastion host : SSH
- access ec2-i in private subnet from  [ public subnet(igw-1) > public-ec2-i : bastion instance ]
- eg: allow `SSH` to ec2-i in private subnet.
  - just update SGs:
      - sg-bastion : inbound : source:selected client public, to port 22(SSH)
      - sg-ec2-i : inbound : cUSTOM >> source:sg-bastion, to port 22(SSH)
  - ![img_2.png](img_2.png)
  - demo:
    - ssh to public bastion 
    - in bastion, add keypair for private ec2-i.
    - from bastion,  SSh to private ec2

### 1.2. NAT instance : https / http
- > outdated,after 2020 : use NAT-gateway 
- ec2-i1 (private subnet) --> http --> server(ccgg.com)
- ec2-i1 (private subnet) --> http --> ` NAT-i (public subnet) `--> http --> server(ccgg.com)
- `NAT-i` (PreConfigured Linux AMI instance)
  - has elastic-IP
  - disable : source/destination IP check
  - it re-writes `src` and `dest`
  - update sg on your ec2-i, to make it work.
  - ![img_3.png](img_3.png)
